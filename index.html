// ping health
fetch(window.KARBA_CONFIG.BACKEND_URL + "/api/health")
  .then(r => r.json()).then(j => console.log("HEALTH:", j));

// simulate a lead (uses reCAPTCHA token)
grecaptcha.ready(()=> {
  grecaptcha.execute(window.KARBA_CONFIG.RECAPTCHA_SITE_KEY, { action:"lead" })
    .then(t => fetch(window.KARBA_CONFIG.BACKEND_URL + "/api/leads", {
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body: JSON.stringify({
        name:"Test User",
        email:"test@example.com",
        phone:"",
        service:"Life Insurance",
        message:"Hello from console",
        recaptchaToken: t
      })
    }))
    .then(r => r.text())
    .then(txt => console.log("LEAD RES:", txt))
    .catch(e => console.error("LEAD ERR:", e));
});
